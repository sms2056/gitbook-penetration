# 图解HTTP

---

## 0x01 TCP/IP

了解HTTP，就必须要了解些TCP/IP协议族。其实机器是很笨的，没有任何智商，想让机器之间通信，必须要有一套完整通信规则，包括如何到达通信目标，使用的传输类型，等等都需要一套规范，这一整套规范就是协议。  
TCP/IP协议就是其中的这么一套协议族。

#### TCP/IP 协议的四层分层管理

| id | 分层 | 解释 |
| :--- | :--- | --- |
| 1. | 应用层 | 具体的协议有，HTTP，FTP（文件传输协议），DNS（域名系统，就是IP与域名互相转换）等。从这里可以看出HTTP协议是TCP/IP协议族的组成部分 |
| 2. | 传输层 | TCP（面向连接的，传输控制协议），UDP（面向无连接的，用户数据报协议） |
| 3. | 网络层 | IP协议 |
| 4. | 数据链路层 | 处理网络的硬件部分，比如，网卡，通信线路（光纤，电缆） |

![](/base/image/httpProtocol/httpP-1.png)

如图所示的，这是整个通信过程中数据流的走向，同时经过每层协议时，都会加上相应的首部，每个首部都会有相应的功能。 
各个分层之间相互协作，当一个部分出现问题，可以找到相应的层次来处理问题，而不是把整个协议都去检查一遍。 

## 0x02 简单的HTTP协议

HTTP协议一般是用户客户端和服务器之间的通信，一般都是客户端请求，服务端响应，类似于一问一答式的通信。

![](/base/image/httpProtocol/httpP-2.png)

就问你，这张图是不是好丑。哈哈，好吧，图虽然丑了点，但是不影响这表达的意思嘛，就是在两台机器通信时使用HTTP协议中，肯定有一方是客户端，一方是服务器。 

![](/base/image/httpProtocol/httpP-3.png)

这就是HTTP通信最基本的格式了，从1中发送请求，从2中返回响应。
请求的格式是：

```
GET /index.htm HTTP/1.1
Host: baidu.com

# GET : 表示的是访问服务器的类型，或者叫请求方法
# /index.htm : 指明了请求访问的资源对象，也叫请求URI
```

这个起始行中的GET表示的是访问服务器的类型，或者叫请求方法，随后的字符串/index.htm指明了请求访问的资源对象，也叫请求URI，最后的HTTP/1.1表示HTTP的版本号，也是提示客户端使用的HTTP协议功能。 
请求报文是由请求方法，请求URI，协议版本，可选的请求首部字段和内容实体构成。 




